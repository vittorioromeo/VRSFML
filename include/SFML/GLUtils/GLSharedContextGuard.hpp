#pragma once
#include <SFML/Copyright.hpp> // LICENSE AND COPYRIGHT (C) INFORMATION


////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include "SFML/GLUtils/GLContextSaver.hpp"


namespace sf::priv
{
////////////////////////////////////////////////////////////
/// \brief Automatic wrapper for temporarily enabling the shared GL context
///
////////////////////////////////////////////////////////////
class GLSharedContextGuard
{
public:
    ////////////////////////////////////////////////////////////
    /// \brief Default constructor
    ///
    /// The current GL context is saved, and switched to the shared
    ///
    ////////////////////////////////////////////////////////////
    GLSharedContextGuard();

    ////////////////////////////////////////////////////////////
    /// \brief Destructor
    ///
    /// The previous GL context is restored.
    ///
    ////////////////////////////////////////////////////////////
    ~GLSharedContextGuard();

    ////////////////////////////////////////////////////////////
    GLSharedContextGuard(const GLSharedContextGuard&)            = delete;
    GLSharedContextGuard& operator=(const GLSharedContextGuard&) = delete;

    ////////////////////////////////////////////////////////////
    GLSharedContextGuard(GLSharedContextGuard&&)            = delete;
    GLSharedContextGuard& operator=(GLSharedContextGuard&&) = delete;

private:
    ////////////////////////////////////////////////////////////
    // Member data
    ////////////////////////////////////////////////////////////
    GLContextSaver m_glContextSaver; //!< GL context saver
};

} // namespace sf::priv
